{"filter":false,"title":"incart.php","tooltip":"/mainPages/incart.php","undoManager":{"mark":20,"position":20,"stack":[[{"start":{"row":0,"column":0},"end":{"row":88,"column":6},"action":"insert","lines":["","<?php","session_start();","if(!empty($_GET[\"action\"])) {","switch($_GET[\"action\"]) {","\tcase \"add\":","\t\tif(!empty($_POST[\"quantity\"])) {","\t\t\t$productByCode = $db_handle->runQuery(\"SELECT * FROM PRODUCT WHERE PRODUCT_NAME='\" . $_GET[\"PRODUCT_NAME\"] . \"'\");","\t\t\t$itemArray = array($productByCode[0][\"PRODUCT_NAME\"]=>array('PRODUCT_DESCRIPTION'=>$productByCode[0][\"PRODUCT_DESCRIPTION\"], 'PRODUCT_NAME'=>$productByCode[0][\"PRODUCT_NAME\"], 'quantity'=>$_POST[\"quantity\"], 'PRODUCT_PRICE'=>$productByCode[0][\"PRODUCT_PRICE\"]));","\t\t\t","\t\t\tif(!empty($_SESSION[\"cart_item\"])) {","\t\t\t\tif(in_array($productByCode[0][\"PRODUCT_NAME\"],array_keys($_SESSION[\"cart_item\"]))) {","\t\t\t\t\tforeach($_SESSION[\"cart_item\"] as $k => $v) {","\t\t\t\t\t\t\tif($productByCode[0][\"PRODUCT_NAME\"] == $k) {","\t\t\t\t\t\t\t\tif(empty($_SESSION[\"cart_item\"][$k][\"quantity\"])) {","\t\t\t\t\t\t\t\t\t$_SESSION[\"cart_item\"][$k][\"quantity\"] = 0;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t$_SESSION[\"cart_item\"][$k][\"quantity\"] += $_POST[\"quantity\"];","\t\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t} else {","\t\t\t\t\t$_SESSION[\"cart_item\"] = array_merge($_SESSION[\"cart_item\"],$itemArray);","\t\t\t\t}","\t\t\t} else {","\t\t\t\t$_SESSION[\"cart_item\"] = $itemArray;","\t\t\t}","\t\t}","\tbreak;","\tcase \"remove\":","\t\tif(!empty($_SESSION[\"cart_item\"])) {","\t\t\tforeach($_SESSION[\"cart_item\"] as $k => $v) {","\t\t\t\t\tif($_GET[\"PRODUCT_NAME\"] == $k)","\t\t\t\t\t\tunset($_SESSION[\"cart_item\"][$k]);\t\t\t\t","\t\t\t\t\tif(empty($_SESSION[\"cart_item\"]))","\t\t\t\t\t\tunset($_SESSION[\"cart_item\"]);","\t\t\t}","\t\t}","\tbreak;","\tcase \"empty\":","\t\tunset($_SESSION[\"cart_item\"]);","\tbreak;\t","}","}","?>","<HTML>","<HEAD>","<TITLE>Simple PHP Shopping Cart</TITLE>","<link href=\"style.css\" type=\"text/css\" rel=\"stylesheet\" />","</HEAD>","<BODY>","<div id=\"shopping-cart\">","<div class=\"txt-heading\">Shopping Cart <a id=\"btnEmpty\" href=\"test.php?action=empty\">Empty Cart</a></div>","<?php","if(isset($_SESSION[\"cart_item\"])){","    $item_total = 0;","?>\t","<table cellpadding=\"10\" cellspacing=\"1\">","<tbody>","<tr>","<th style=\"text-align:left;\"><strong>Name</strong></th>","<th style=\"text-align:left;\"><strong>Description</strong></th>","<th style=\"text-align:right;\"><strong>Quantity</strong></th>","<th style=\"text-align:right;\"><strong>Price</strong></th>","<th style=\"text-align:center;\"><strong>Action</strong></th>","</tr>\t","<?php\t\t","    foreach ($_SESSION[\"cart_item\"] as $item){","\t\t?>","\t\t\t\t<tr>","\t\t\t\t<td style=\"text-align:left;border-bottom:#F0F0F0 1px solid;\"><strong><?php echo $item[\"PRODUCT_NAME\"]; ?></strong></td>","\t\t\t\t<td style=\"text-align:left;border-bottom:#F0F0F0 1px solid;\"><?php echo $item[\"PRODUCT_DESCRIPTION\"]; ?></td>","\t\t\t\t<td style=\"text-align:right;border-bottom:#F0F0F0 1px solid;\"><?php echo $item[\"quantity\"]; ?></td>","\t\t\t\t<td style=\"text-align:right;border-bottom:#F0F0F0 1px solid;\"><?php echo \"&pound;\".$item[\"PRODUCT_PRICE\"].\".00\" ?></td>","\t\t\t\t<td style=\"text-align:center;border-bottom:#F0F0F0 1px solid;\"><a href=\"test.php?action=remove&PRODUCT_NAME=<?php echo $item[\"PRODUCT_NAME\"]; ?>\" class=\"btnRemoveAction\">Remove Item</a></td>","\t\t\t\t</tr>","\t\t\t\t<?php","        $item_total += ($item[\"PRODUCT_PRICE\"]*$item[\"quantity\"]);","\t\t}","\t\t?>","","<tr>","<td colspan=\"5\" align=right><strong>Total:</strong> <?php echo \"&pound;\".$item_total.\".00\" ?></td>","</tr>","</tbody>","</table>\t\t","  <?php","}","?>","</div>"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""],"id":2}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"insert","lines":["i"],"id":5}],[{"start":{"row":1,"column":1},"end":{"row":1,"column":2},"action":"insert","lines":["n"],"id":6}],[{"start":{"row":1,"column":2},"end":{"row":1,"column":3},"action":"insert","lines":["c"],"id":7}],[{"start":{"row":1,"column":3},"end":{"row":1,"column":4},"action":"insert","lines":["l"],"id":8}],[{"start":{"row":1,"column":4},"end":{"row":1,"column":5},"action":"insert","lines":["u"],"id":9}],[{"start":{"row":1,"column":5},"end":{"row":1,"column":6},"action":"insert","lines":["d"],"id":10}],[{"start":{"row":1,"column":6},"end":{"row":1,"column":7},"action":"insert","lines":["e"],"id":11}],[{"start":{"row":1,"column":7},"end":{"row":1,"column":8},"action":"insert","lines":[" "],"id":12}],[{"start":{"row":1,"column":8},"end":{"row":1,"column":10},"action":"insert","lines":["''"],"id":13}],[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"insert","lines":[";"],"id":14}],[{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"insert","lines":["c"],"id":15}],[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"insert","lines":["a"],"id":16}],[{"start":{"row":1,"column":11},"end":{"row":1,"column":12},"action":"insert","lines":["r"],"id":17}],[{"start":{"row":1,"column":12},"end":{"row":1,"column":13},"action":"insert","lines":["t"],"id":18}],[{"start":{"row":1,"column":13},"end":{"row":1,"column":14},"action":"insert","lines":["."],"id":19}],[{"start":{"row":1,"column":14},"end":{"row":1,"column":15},"action":"insert","lines":["p"],"id":20}],[{"start":{"row":1,"column":15},"end":{"row":1,"column":16},"action":"insert","lines":["h"],"id":21}],[{"start":{"row":1,"column":16},"end":{"row":1,"column":17},"action":"insert","lines":["p"],"id":22}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":83},"end":{"row":7,"column":114},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":194,"mode":"ace/mode/php"}},"timestamp":1492955889771,"hash":"06a027b9456d7ff96197e70d6641631693f09422"}